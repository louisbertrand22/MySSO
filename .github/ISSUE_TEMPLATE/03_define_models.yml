name: "√âtape 3 - D√©finition des mod√®les Prisma"
description: "Cr√©er et structurer les mod√®les principaux (User, Session, Token...) pour le SSO."
title: "[√âtape 3] D√©finir les mod√®les Prisma"
labels:
  - backend
  - prisma
  - sso
  - √©tape-3
assignees:
  - copilothub[bot]
body:
  - type: markdown
    attributes:
      value: |
        ## üß± √âtape 3 - D√©finition des mod√®les Prisma

        Dans cette √©tape, nous allons d√©finir les **entit√©s principales** du SSO dans `prisma/schema.prisma`.
        Ces mod√®les serviront de base √† toute la logique d‚Äôauthentification.

        ### Objectifs :
        - Cr√©er le mod√®le `User`
        - Cr√©er le mod√®le `Session`
        - Cr√©er le mod√®le `RefreshToken` (ou `Token`)
        - Ex√©cuter `npm run prisma:generate` et `npm run prisma:migrate`
        - V√©rifier la structure dans Prisma Studio

  - type: textarea
    id: models
    attributes:
      label: Mod√®les Prisma √† d√©finir
      description: Propose ici les mod√®les initiaux √† inclure dans le sch√©ma Prisma.
      value: |
        ```prisma
        model User {
          id            String   @id @default(cuid())
          email         String   @unique
          passwordHash  String
          createdAt     DateTime @default(now())
          sessions      Session[]
        }

        model Session {
          id        String   @id @default(cuid())
          userId    String
          user      User     @relation(fields: [userId], references: [id])
          createdAt DateTime @default(now())
          expiresAt DateTime
        }

        model RefreshToken {
          id        String   @id @default(cuid())
          userId    String
          user      User     @relation(fields: [userId], references: [id])
          token     String   @unique
          createdAt DateTime @default(now())
          expiresAt DateTime
        }
        ```
    validations:
      required: true

  - type: textarea
    id: commands
    attributes:
      label: Commandes √† ex√©cuter
      description: Liste les commandes Prisma √† lancer apr√®s mise √† jour du sch√©ma.
      value: |
        ```bash
        npm run prisma:generate
        npm run prisma:migrate
        npm run prisma:studio
        ```
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ---
        ‚úÖ **Checklist :**
        - [ ] Les mod√®les `User`, `Session`, et `RefreshToken` sont d√©finis dans `schema.prisma`
        - [ ] La migration a √©t√© appliqu√©e sans erreur
        - [ ] Le client Prisma a √©t√© r√©g√©n√©r√©
        - [ ] Les mod√®les sont visibles dans Prisma Studio
